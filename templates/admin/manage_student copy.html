<!-- {% include 'admin/admin_header.html' %}

<div class="untree_co-hero  " style="background-image: url('static/images/home1.jpeg'); padding: 70px 50px;">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-19">
                <div class="row justify-content-center">
                    <div class="col-lg-16">
                        <!-- Update student form -->
                        {% if data['up'] %}
                        <form action="" method="post"   style=" padding:100px 1px; align-items: center;color: rgb(26, 11, 11);" >
                            <h1 style="color: rgb(24, 5, 5) ;margin-bottom: 10px; text-align:center;">Update Student Details</h1>
                            
                            <div class="container">
                                <div class="row">
                                    <!-- First Row: Course, First Name, Last Name, Email, Phone -->
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="course_id" style="color: rgb(19, 2, 2);" >Course</label>
                                            <select name="course_id" class="form-control" style="color:white ; border :2px solid white; " required>
                                                <option style="color: black ;" value="{{data['up'][0]['i.course_id']}}">{{data['up'][0]['course_name']}}</option>
                                                <option style="color: black ;" value="">Select course</option>
                                                {% for i in data['cour'] %}
                                                <option style="color: black ;" value="{{i.course_id}}">{{i.course_name}}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                        
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="first_name" style="color: rgb(14, 4, 4);" >First Name</label>
                                            <input type="text" class="form-control" name="first_name" style="color: white;border: 2px solid" value="{{ data['up'][0]['first_name'] }}" required>
                                        </div>
                                    </div>
                        
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="last_name" style="color: white;" >Last Name</label>
                                            <input  type="text" class="form-control" name="last_name"  style="color: white; border: 2px solid" value="{{ data['up'][0]['last_name'] }}" required>
                                        </div>
                                    </div>
                        
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="email" style="color: white;" >Email</label>
                                            <input type="email" class="form-control" name="email" style="color: white; border: 2px solid" value="{{ data['up'][0]['email'] }}" required>
                                        </div>
                                    </div>
                                    
                        
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="phone" style="color: white;" >Phone</label>
                                            <input type="text" class="form-control" name="phone" style="color: white;;border: 2px solid" value="{{ data['up'][0]['phone'] }}" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="dob" style="color: white;" >Date of Birth</label>
                                            <input type="date" class="form-control" style="color: white; border: 2px solid"  name="dob" value="{{ data['up'][0]['dob'] }}" required>
                                        </div>
                                    </div>
                                   
                        
                        
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="house_name" style="color: white;" >House Name</label>
                                            <input type="text" class="form-control" name="house_name"style="color: white;border: 2px solid"  value="{{ data['up'][0]['house_name'] }}" required>
                                        </div>
                                    </div>
                                    <div >
                                        <div class="col-md-12">

                                        <label>Gender</label>
                                        <div class="form-check">
                                            <input type="radio" id="gender_male" name="gender" style="color: white; border: 2px solid" value="male" {% if data ['up'][0]['gender'] == 'male' %} checked {% endif %}>
                                            <label for="gender_male" style="color: white;" >Male</label>
                        
                                            <input type="radio" id="gender_female" name="gender"style="color: white; border: 2px solid"  value="female" {% if data ['up'][0]['gender'] == 'female' %} checked {% endif %}>
                                            <label for="gender_female" style="color: white;" >Female</label>
                        
                                            <input type="radio" id="gender_other" name="gender" style="color: white;border: 2px solid"  value="other" {% if data ['up'][0]['gender'] == 'other' %} checked {% endif %}>
                                            <label for="gender_other" style="color: white;" >Other</label>
                                        </div>
                                    </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="pincode" style="color: white;" >Pincode</label>
                                            <input type="text" class="form-control"style="color: white; border: 2px solid"  name="pincode" value="{{ data['up'][0]['pincode'] }}" required>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="place" style="color: white;" >Place</label>
                                            <input type="text" class="form-control" name="place" style="color: white;border: 2px solid" value="{{ data['up'][0]['place'] }}" required>
                                        </div>
                                    </div>
                        
                                   
                                </div>
                        
                                <!-- Submit Button -->
                                <div class="row">
                                    <div class="col-md-12 text-center">
                                        <input type="submit" name="updates" class="btn btn-primary" style="background-color:antiquewhite; color: black;" value="UPDATE STUDENT">
                                    </div>
                                </div>
                            </div> 
                            {% endif %}

                        </form>
                        
                    </div> <!-- /.col-lg-6 -->

                    <div class="col-lg-16">
                        <!-- Add student form -->
                        {% if not data['up'] %}
                        <form action="" method="post" style=" padding:100px 1px; align-items: center;color: rgb(10, 4, 4);">
                            <h1 style="margin-bottom: 10px; text-align: center;">Add Student</h1>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="text-light">Username</label>
                                        <input type="text" class="form-control text-light"  name="username" style="color: white;border: 2px solid" required>
                                    </div>
                                    </div>
                                    <div class="col-md-6">

                                    <!-- <div class="form-group">
                                        <label>Password</label>
                                        <input type="password" class="form-control" name="password"style="color: white;border: 2px solid" required>
                                    </div> -->
                                    </div>
                                    <div class="col-md-6">

                                    <div class="form-group">
                                        <label class="text-light">Course</label>
                                        <select style="color: rgb(3, 1, 1);border: 2px solid" name="course_id" class="form-control text-light" required>
                                            <option style="color: black;border: 2px solid" value="">Select course</option>
                                            {% for i in data['cour'] %}
                                            <option style="color: black;border: 2px solid" value="{{i.course_id}}">{{i.course_name}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>Email</label>
                                            <input type="email" class="form-control" name="email" pattern=".+.com" style="color: rgb(14, 12, 12);border: 2px solid" required>
                                        </div>
                                        </div>
                                    <div class="col-md-6">

                                    <div class="form-group">
                                        <label>First Name</label>
                                        <input type="text" class="form-control" name="first_name" style="color: rgb(2, 0, 0);border: 2px solid" required>
                                    </div>
                                    </div>
                                    <div class="col-md-6">

                                    <div class="form-group">
                                        <label>Last Name</label>
                                        <input type="text" class="form-control" name="last_name" style="color: rgb(8, 0, 0);border: 2px solid" required>
                                    </div>
                                    </div>

                               
                                    <div class="col-md-6">

                                    <div class="form-group">
                                        <label>Phone</label>
                                        <input type="text" class="form-control" name="phone" style="color: rgb(17, 1, 1);border: 2px solid" required>
                                    </div>
                                    </div>
                                    <div class="col-md-4">

                                        <div class="form-group">
                                            <label>Date of Birth</label>
                                            <input type="date" class="form-control" name="dob" style="color: rgb(15, 0, 0);border: 2px solid" required>
                                        </div>
                                        </div>

                                    <div class="row">

                                    <div class="col-md-12">

                                    <div class="form-group" >
                                        <labelre>Gender</label><br>
                                        <input type="radio" name="gender" value="male" required> Male
                                        <input type="radio" name="gender" value="female" required> Female
                                        <input type="radio" name="gender" value="other" required> Other
                                    </div>
                                    </div>
                                </div> <!-- /.col-md-6 -->
  
                                    <div class="col-md-4">

                                    <div class="form-group">
                                        <label>House Name</label>
                                        <input type="text" class="form-control" name="house_name" style="color: rgb(20, 7, 7);border: 2px solid" required>
                                    </div>
                                    </div>
                                    <div class="col-md-4">

                                    <div class="form-group">
                                        <label>Place</label>
                                        <input type="text" class="form-control" name="place" style="color: rgb(10, 5, 5);border: 2px solid" required>
                                    </div>
                                    </div>
                                    <div class="col-md-4">

                                    <div class="form-group">
                                        <label>Pincode</label>
                                        <input type="text" class="form-control" name="pincode" style="color: rgb(24, 13, 13);border: 2px solid" required>
                                    </div>
                                    </div>
                                </div> <!-- /.col-md-6 -->
                            <div class="text-center">
                                <input type="submit" name="submit" class="btn btn-primary" style="background-color:rgb(177, 118, 30); color: rgb(81, 107, 74);" value="ADD">
                            </div>
                        </div> <!-- /.row -->

                        </form>
                        {% endif %}
                    </div> <!-- /.col-lg-6 -->
                    </div>
                </div>
               

                <!-- Display student data -->
                <br><br><br>

                <br><br><br>
                <br><br><br>
                <br><br><br>
                <br><br><br>


                <h1 style="color: black; margin-bottom: 10px; text-align: center;">STUDENT'S DETAILS</h1>

                <div class="col-lg-16" style="padding: 10px;">
                    <div style="overflow-x: auto; width: 100%;"> <!-- Wrapper for horizontal scroll -->
                        <table class="table table-bordered">
                            <thead style="background-color: burlywood; color: brown;">
                                <tr>
                                    <th>Sl. No</th>
                                    <th>User Name</th>
                                    <th>Password</th>
                                    <th>Course Name</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Gender</th>
                                    <th>DOB</th>
                                    <th>House Name</th>
                                    <th>Place</th>
                                    <th>Pincode</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for i in data['stud'] %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ i.username }}</td>
                                    <td>{{ i.password }}</td>
                                    <td>{{ i.course_name }}</td>
                                    <td>{{ i.first_name }}</td>
                                    <td>{{ i.last_name }}</td>
                                    <td>{{ i.email }}</td>
                                    <td>{{ i.phone }}</td>
                                    <td>{{ i.gender }}</td>
                                    <td>{{ i.dob }}</td>
                                    <td>{{ i.house_name }}</td>
                                    <td>{{ i.place }}</td>
                                    <td>{{ i.pincode }}</td>
                                    <td>
                                        <a href="?action=update&student_id={{ i.student_id }}" class="btn btn-sm btn-warning" style="padding: 10px 24px;">Edit</a><br><hr>
                                        <a href="?action=delete&student_id={{ i.student_id }}" class="btn btn-sm btn-danger">Delete</a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                
            </div>
        </div> <!-- /.row -->
    </div> <!-- /.container -->
</div>
</div>

<!-- <div class="untree_co-hero  " style="background-image: url('static/images/home1.jpeg'); padding: 70px 50px;"> -->


                        <script src="
                        https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
                        </script>
                        
                        <script>
                            $(function() {
                                $("input[name='first_name']").on('input', function(e) {
                                    $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));
                        
                                });
                                $("input[name='last_name']").on('input', function(e) {
                                    $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));
                        
                                });
                        
                                $("input[name='email']").on('input', function(e) {
                                    $(this).val($(this).val().replace(/[^0-9A-Za-z@/. ]/g, ''));
                        
                                });

                                // $("input[name='phone']").on('input', function(e) {
                                //     let value = $(this).val().replace(/[^0-9]/g, '');
                                //     if (value.length = 10) {
                                //         value = value.slice(0, 10); // Limit to 10 digits
                                //     }
                                //     $(this).val(value);
                                // });
                                $("input[name='phone']").on('blur', function(e) {
                                    let value = $(this).val().replace(/[^0-9]/g, '');  // Remove non-numeric characters
                                    
                                    if (value.length > 10) {
                                        value = value.slice(0, 10);  // Limit to 10 digits if it exceeds 10
                                    }

                                    $(this).val(value);  // Set the processed value back in the input field

                                    // Check if the phone number is less than 10 digits and show alert after input
                                    if (value.length < 10) {
                                        alert("Phone number must be valid  .");
                                    }
                                });

                                $("input[name='gender']").on('input', function(e) {
                                    $(this).val($(this).val().replace(/[^A-Za-z0-9()/. ]/g, ''));
                        
                                });
                               
                                $("input[name='house_name']").on('input', function(e) {
                                    $(this).val($(this).val().replace(/[^A-Za-z0-9()/. ]/g, ''));
                        
                                });
                        
                                });
                                $("input[name='place']").on('input', function(e) {
                                    $(this).val($(this).val().replace(/[^A-Za-z ]/g, ''));
                        
                                });
                                $("input[name='pincode']").on('input', function(e) {
                                    let value = $(this).val().replace(/[^0-9]/g, '');
                                    if (value.length > 6) {
                                        value = value.slice(0, 6); // Limit to 6 digits
                                    }
                                    $(this).val(value);
                                });
                                $("input[name='dob']").on('blur', function(e) {
                                        const dobValue = $(this).val();  // Get the entered date of birth
                                        const dobDate = new Date(dobValue);
                                        const today = new Date();

                                        let age = today.getFullYear() - dobDate.getFullYear();
                                        const monthDiff = today.getMonth() - dobDate.getMonth();
                                        const dayDiff = today.getDate() - dobDate.getDate();

                                        // Adjust the age if the birth date hasn't occurred yet this year
                                        if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
                                            age--;
                                        }

                                        // Check if age is less than 17
                                        if (age < 17) {
                                            alert("Age must be 17 years or above.");
                                            $(this).val('');  // Clear the invalid date
                                        }
                                    });

                                
                            
                                
                                    $("input[name='username']").on('input', function(e) {
                                    let value = $(this).val().replace(/[^0-9]/g, '');
                                    if (value.length > 6) {
                                        value = value.slice(0, 6); // Limit to 6 digits
                                    }
                                    $(this).val(value);
                                });
                                    
                                $("input[name='password']").on('input', function(e) {
    // Allow only alphanumeric characters and specific special characters
    $(this).val($(this).val().replace(/[^0-9A-Za-z@/. ]/g, ''));

    // Password validation
    const password = $(this).val();
    const isValid = validatePassword(password);

    // You can display a message or apply some styles based on the validation result
    if (isValid) {
        console.log('Password is valid!');
    } else {
        console.log('Password is invalid!');
    }
});

function validatePassword(password) {
    // Minimum 8 characters, at least one uppercase, one lowercase, one number, and one special character
    const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@/.])[A-Za-z\d@/.]{8,}$/;
    return regex.test(password);
}

                    
                        </script>   
 -->
