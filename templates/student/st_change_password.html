{% include 'student/student_header.html' %}
<div class="untree_co-hero" style="background-image: url('static/images/home1.jpeg'); padding: 70px 50px;">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-12">
                <div class="row justify-content-center">
                    <div class="col-lg-6 text-center">
                        <form action="" method="post" onsubmit="return validatePassword()" 
                            style="border: 2px solid #ccc; padding: 30px; border-radius: 10px; background-color: rgba(255, 255, 255, 0.9); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
                            <h1 style="margin-bottom: 20px;">Change Password</h1>

                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <th style="text-align: left; padding: 10px;">Password</th>
                                    <td style="padding: 10px;">
                                        <input type="password" name="password" id="password" class="form-control" required style="width: 100%; padding: 8px;">
                                    </td>
                                </tr>
                                <tr>
                                    <th style="text-align: left; padding: 10px;">Confirm Password</th>
                                    <td style="padding: 10px;">
                                        <input type="password" name="confirm_password" id="confirm_password" required style="width: 100%; padding: 8px;">
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" style="text-align: center; padding: 20px;">
                                        <input type="submit" name="submit" value="Change Password" class="btn btn-primary" style="padding: 10px 20px;">
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                </div>
            </div>
        </div> <!-- /.row -->
    </div> <!-- /.container -->
</div> <!-- /.untree_co-hero -->

<script>
function validatePassword() {
    var password = document.getElementById("password").value;
    var confirm_password = document.getElementById("confirm_password").value;

    if (password === "") {
        alert("Please enter the new password.");
        return false;
    }

    // Password validation pattern:
    // At least 8 characters, 1 uppercase, 1 lowercase, 1 digit, and 1 special character
    var regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]).{8,}$/;

    if (!regex.test(password)) {
        alert("Password must be at least 8 characters long and include at least:\n- one uppercase letter\n- one lowercase letter\n- one digit\n- one special character.");
        return false;
    }

    if (password !== confirm_password) {
        alert("Passwords do not match. Please try again.");
        return false;
    }

    return true;
}
</script>

{% include 'public/footer.html' %}
